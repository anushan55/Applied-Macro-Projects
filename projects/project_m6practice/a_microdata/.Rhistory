plot(ldeaths)
load (ldeaths)
load(ldeaths)
df<- ldeaths
df<- data.frame(ldeaths)
df$lndeaths<-ln(df$ldeaths)
library("Sciviews")
library("Sciview")
install.packages("Sciviews")
library("Sciviews")
library(Sciviews)
library(SciViews)
df$lndeaths<-ln(df$ldeaths)
d_lndeaths<-df$lndeaths-lag(df$lndeaths)
View(df)
df$d_lndeaths<-df$lndeaths-lag(df$lndeaths)
#  Non linear education model on wages
#df dataframe
#l list
#var variable
# BASIC STRUCTURE:
#1) DATA PREP
# create base df
#input:
#output:
# create separate dfs for each var type
#input: base df
#output:
# create analysis df and subsamples
#input: combine var type dfs
#output: xx.rda and subsamples
#2) ANALYSIS
#for each sample: sumstats, regs, figures
################################################################################################################+
# INTRO ####
#clear console
cat("\014")
#clear all globals in memory
rm(list = ls()) #needs to go before user-written functions (not libraries) are loaded
sink()
######################+
# non-automatable globals #####
#for master scriptname and extension #####
library(rstudioapi)
MAINNAME <- rstudioapi::getActiveDocumentContext()$path #returns path+name
MAINNAME <- sub(".*/|^[^/]*$", "", MAINNAME)
MAINNAME <- substr(MAINNAME,1,nchar(MAINNAME)-2) #cut off .R
HOME <- "E:/Documents/Applied Macro/Projects/projects/" #here: path to 'projects' dir
DO <- paste0(HOME,"/project_m6practice/c_program/") #here: path to folder with R.code
######################+
# launch set-up scripts #####
input <- '00_execute_m6practice_intro_aux.R'
source(paste0(DO,input,sep=""), echo=TRUE, max=1000)
#DEBUG <- T
setwd(HOME)
# TARGET:
# INDATA:
# OUTDATA/ OUTPUT:
################################################################################################################+
# INTRO	script-specific ####
#clear gobal environment of all but uppercase objects (globals, myfunctions, scalars)
CLEARCOND()
#adapt scriptname/ rfilename and extension if NOT executed in batch mode
MAINNAME_check <- rstudioapi::getActiveDocumentContext()$path #returns path+name of script currently executed (no outsourcing to program possible)
if ( !grepl("00_execute",MAINNAME_check)) {
MAINNAME <- sub(".*/|^[^/]*$", "", MAINNAME_check)
MAINNAME <- substr(MAINNAME,1,nchar(MAINNAME)-2) #cut off .R
}
######################+
#release unused memory
gc()
################################################################################################################+
# MAIN PART ####
# Import dataset
setwd(A)
df <- read_dta("Labour_Force_SA_SALDRU_1993.dta")
#create original row id
df$ADMIN_ID <- seq.int(nrow(df))
#save as.rda
SAVE(dfx=df)
################################################################################################################+
# INTRO	script-specific ####
#clear gobal environment of all but uppercase objects (globals, myfunctions, scalars)
CLEARCOND()
#adapt scriptname/ rfilename and extension if NOT executed in batch mode
MAINNAME_check <- rstudioapi::getActiveDocumentContext()$path #returns path+name of script currently executed (no outsourcing to program possible)
if ( !grepl("00_execute",MAINNAME_check)) {
MAINNAME <- sub(".*/|^[^/]*$", "", MAINNAME_check)
MAINNAME <- substr(MAINNAME,1,nchar(MAINNAME)-2) #cut off .R
}
######################+
#release unused memory
gc()
################################################################################################################+
# MAIN PART ####
df<-LOAD(dfinput=paste0(DFBASE,"_ex5"))
summarise(df)
glimpse(df)
unique.data.frame(df)
tbl_df(df)
as_tibble(df)
View(df)
# TARGET:
# INDATA:
# OUTDATA/ OUTPUT:
################################################################################################################+
# INTRO	script-specific ####
#clear gobal environment of all but uppercase objects (globals, myfunctions, scalars)
CLEARCOND()
#adapt scriptname/ rfilename and extension if NOT executed in batch mode
MAINNAME_check <- rstudioapi::getActiveDocumentContext()$path #returns path+name of script currently executed (no outsourcing to program possible)
if ( !grepl("00_execute",MAINNAME_check)) {
MAINNAME <- sub(".*/|^[^/]*$", "", MAINNAME_check)
MAINNAME <- substr(MAINNAME,1,nchar(MAINNAME)-2) #cut off .R
}
######################+
#release unused memory
gc()
################################################################################################################+
# MAIN PART ####
df<-LOAD(dfinput=paste0(DFBASE,"_ex5"))
View(df)
#Create variable
colnames(df) <- sub("^logwphy$","lnwage",colnames(df))
#restrict
df <- df[,c("ADMIN_ID","lnwage")]
SAVE(dfx=df)
# TARGET:
# INDATA:
# OUTDATA/ OUTPUT:
################################################################################################################+
# INTRO	script-specific ####
#clear gobal environment of all but uppercase objects (globals, myfunctions, scalars)
CLEARCOND()
#adapt scriptname/ rfilename and extension if NOT executed in batch mode
MAINNAME_check <- rstudioapi::getActiveDocumentContext()$path #returns path+name of script currently executed (no outsourcing to program possible)
if ( !grepl("00_execute",MAINNAME_check)) {
MAINNAME <- sub(".*/|^[^/]*$", "", MAINNAME_check)
MAINNAME <- substr(MAINNAME,1,nchar(MAINNAME)-2) #cut off .R
}
######################+
#release unused memory
gc()
################################################################################################################+
# MAIN PART ####
df<-LOAD(dfinput=paste0(DFBASE,"_ex5"))
#create variable
colnames(df) <- sub("^edyrs$","edu",colnames(df))
df$edu2<-(df$edu)^2
#rename
#colnames(df) <- sub("urateb","UNEMRATE",colnames(df))
#restrict
df <- df[,c("ADMIN_ID","edu", "edu2")]
SAVE(dfx=df)
# INTRO	script-specific ####
#clear gobal environment of all but uppercase objects (globals, myfunctions, scalars)
CLEARCOND()
#adapt scriptname/ rfilename and extension if NOT executed in batch mode
MAINNAME_check <- rstudioapi::getActiveDocumentContext()$path #returns path+name of script currently executed (no outsourcing to program possible)
if ( !grepl("00_execute",MAINNAME_check)) {
MAINNAME <- sub(".*/|^[^/]*$", "", MAINNAME_check)
MAINNAME <- substr(MAINNAME,1,nchar(MAINNAME)-2) #cut off .R
}
######################+
#release unused memory
gc()
################################################################################################################+
# MAIN PART ####
df1 <- LOAD(dfinput="m6practice_varcreation_outcomes_ex5")
df2 <- LOAD(dfinput="m6practice_varcreation_treatments_ex5")
#...
#merge
df <- merge(df1,df2,by="ADMIN_ID")
SAVE(dfx=df)
# OUTDATA/ OUTPUT:
################################################################################################################+
# INTRO	script-specific ####
#clear gobal environment of all but uppercase objects (globals, myfunctions, scalars)
CLEARCOND()
#adapt scriptname/ rfilename and extension if NOT executed in batch mode
MAINNAME_check <- rstudioapi::getActiveDocumentContext()$path #returns path+name of script currently executed (no outsourcing to program possible)
if ( !grepl("00_execute",MAINNAME_check)) {
MAINNAME <- sub(".*/|^[^/]*$", "", MAINNAME_check)
MAINNAME <- substr(MAINNAME,1,nchar(MAINNAME)-2) #cut off .R
}
######################+
#release unused memory
gc()
################################################################################################################+
# MAIN PART ####
df<-LOAD(dfinput=paste0(DFMERGE,"_ex5"))
#restrict cols -> already in varcreation section given only vars of specific type are saved for merge
#restrict to non-missing rows
dim(df)
df <- df[complete.cases(df),]
dim(df)
#save
SAVE(dfx=df,namex=MAINNAME,pattdir=A)
################################################################################################################+
# INTRO	script-specific ####
#clear gobal environment of all but uppercase objects (globals, myfunctions, scalars)
CLEARCOND()
#adapt scriptname/ rfilename and extension if NOT executed in batch mode
MAINNAME_check <- rstudioapi::getActiveDocumentContext()$path #returns path+name of script currently executed (no outsourcing to program possible)
if ( !grepl("00_execute",MAINNAME_check)) {
MAINNAME <- sub(".*/|^[^/]*$", "", MAINNAME_check)
MAINNAME <- substr(MAINNAME,1,nchar(MAINNAME)-2) #cut off .R
}
######################+
#release unused memory
gc()
################################################################################################################+
# MAIN PART ####
df<-LOAD(dfinput=paste0(DFMAIN,"_ex5"))
summarise(df)
# TARGET:
# INDATA:
# OUTDATA/ OUTPUT:
################################################################################################################+
# INTRO	script-specific ####
#clear gobal environment of all but uppercase objects (globals, myfunctions, scalars)
CLEARCOND()
#adapt scriptname/ rfilename and extension if NOT executed in batch mode
MAINNAME_check <- rstudioapi::getActiveDocumentContext()$path #returns path+name of script currently executed (no outsourcing to program possible)
if ( !grepl("00_execute",MAINNAME_check)) {
MAINNAME <- sub(".*/|^[^/]*$", "", MAINNAME_check)
MAINNAME <- substr(MAINNAME,1,nchar(MAINNAME)-2) #cut off .R
}
######################+
#release unused memory
gc()
################################################################################################################+
# MAIN PART ####
df<-LOAD(dfinput=paste0(DFMAIN,"_ex4"),pattdir=A)
#summarystats
summarise(df)
#summarystats
describe(df)
summary(df)
dim(df)
df_status(df)
#View(df)
head(df,20)
tail(df)
################################################################################################################+
# INTRO	script-specific ####
#clear gobal environment of all but uppercase objects (globals, myfunctions, scalars)
CLEARCOND()
#adapt scriptname/ rfilename and extension if NOT executed in batch mode
MAINNAME_check <- rstudioapi::getActiveDocumentContext()$path #returns path+name of script currently executed (no outsourcing to program possible)
if ( !grepl("00_execute",MAINNAME_check)) {
MAINNAME <- sub(".*/|^[^/]*$", "", MAINNAME_check)
MAINNAME <- substr(MAINNAME,1,nchar(MAINNAME)-2) #cut off .R
}
######################+
#release unused memory
gc()
################################################################################################################+
# MAIN PART ####
df<-LOAD(dfinput=paste0(DFMAIN,"_ex5"),pattdir=A)
################################################################################################################+
# INTRO	script-specific ####
#clear gobal environment of all but uppercase objects (globals, myfunctions, scalars)
CLEARCOND()
#adapt scriptname/ rfilename and extension if NOT executed in batch mode
MAINNAME_check <- rstudioapi::getActiveDocumentContext()$path #returns path+name of script currently executed (no outsourcing to program possible)
if ( !grepl("00_execute",MAINNAME_check)) {
MAINNAME <- sub(".*/|^[^/]*$", "", MAINNAME_check)
MAINNAME <- substr(MAINNAME,1,nchar(MAINNAME)-2) #cut off .R
}
######################+
#release unused memory
gc()
################################################################################################################+
# MAIN PART ####
df<-LOAD(dfinput=paste0(DFMAIN,"_ex5"),pattdir=A)
################################################################################################################+
# INTRO	script-specific ####
#clear gobal environment of all but uppercase objects (globals, myfunctions, scalars)
CLEARCOND()
#adapt scriptname/ rfilename and extension if NOT executed in batch mode
MAINNAME_check <- rstudioapi::getActiveDocumentContext()$path #returns path+name of script currently executed (no outsourcing to program possible)
if ( !grepl("00_execute",MAINNAME_check)) {
MAINNAME <- sub(".*/|^[^/]*$", "", MAINNAME_check)
MAINNAME <- substr(MAINNAME,1,nchar(MAINNAME)-2) #cut off .R
}
######################+
#release unused memory
gc()
################################################################################################################+
# MAIN PART ####
df<-LOAD(dfinput=paste0(DFMERGE,"_ex5"))
#restrict cols -> already in varcreation section given only vars of specific type are saved for merge
#restrict to non-missing rows
dim(df)
df <- df[complete.cases(df),]
dim(df)
#save
SAVE(dfx=df,namex=MAINNAME,pattdir=A)
#clear gobal environment of all but uppercase objects (globals, myfunctions, scalars)
CLEARCOND()
#adapt scriptname/ rfilename and extension if NOT executed in batch mode
MAINNAME_check <- rstudioapi::getActiveDocumentContext()$path #returns path+name of script currently executed (no outsourcing to program possible)
if ( !grepl("00_execute",MAINNAME_check)) {
MAINNAME <- sub(".*/|^[^/]*$", "", MAINNAME_check)
MAINNAME <- substr(MAINNAME,1,nchar(MAINNAME)-2) #cut off .R
}
######################+
#release unused memory
gc()
################################################################################################################+
# MAIN PART ####
df<-LOAD(dfinput=paste0(DFMAIN,"_ex5"),pattdir=A)
#summarystats
summary(df)
dim(df)
head(df,20)
tail(df)
#restrict to non-missing rows
dim(df)
df <- df[complete.cases(df),]
dim(df)
#save
SAVE(dfx=df,namex=MAINNAME,pattdir=A)
#clear gobal environment of all but uppercase objects (globals, myfunctions, scalars)
CLEARCOND()
#adapt scriptname/ rfilename and extension if NOT executed in batch mode
MAINNAME_check <- rstudioapi::getActiveDocumentContext()$path #returns path+name of script currently executed (no outsourcing to program possible)
if ( !grepl("00_execute",MAINNAME_check)) {
MAINNAME <- sub(".*/|^[^/]*$", "", MAINNAME_check)
MAINNAME <- substr(MAINNAME,1,nchar(MAINNAME)-2) #cut off .R
}
######################+
#release unused memory
gc()
################################################################################################################+
# MAIN PART ####
df<-LOAD(dfinput=paste0(DFMAIN,"_ex5"),pattdir=A)
# run regression equation
reg1<- lm(lnwage ~ edu+edu2, data = df)
summary (reg1)
#export
stargazer(reg1,type="latex")
stargazer(reg1,type="text")
# TARGET:
# INDATA:
# OUTDATA/ OUTPUT:
################################################################################################################+
# INTRO	script-specific ####
#clear gobal environment of all but uppercase objects (globals, myfunctions, scalars)
CLEARCOND()
#adapt scriptname/ rfilename and extension if NOT executed in batch mode
MAINNAME_check <- rstudioapi::getActiveDocumentContext()$path #returns path+name of script currently executed (no outsourcing to program possible)
if ( !grepl("00_execute",MAINNAME_check)) {
MAINNAME <- sub(".*/|^[^/]*$", "", MAINNAME_check)
MAINNAME <- substr(MAINNAME,1,nchar(MAINNAME)-2) #cut off .R
}
######################+
#release unused memory
gc()
################################################################################################################+
# MAIN PART ####
df<-LOAD(dfinput=paste0(DFMAIN,"_ex5"),pattdir=A)
# run regression equation
reg1<- lm(lnwage ~ edu, data = df)
reg2<- lm(lnwage ~ edu+edu2, data = df)
summary (reg1)
su8mmary(reg2)
# TARGET:
# INDATA:
# OUTDATA/ OUTPUT:
################################################################################################################+
# INTRO	script-specific ####
#clear gobal environment of all but uppercase objects (globals, myfunctions, scalars)
CLEARCOND()
#adapt scriptname/ rfilename and extension if NOT executed in batch mode
MAINNAME_check <- rstudioapi::getActiveDocumentContext()$path #returns path+name of script currently executed (no outsourcing to program possible)
if ( !grepl("00_execute",MAINNAME_check)) {
MAINNAME <- sub(".*/|^[^/]*$", "", MAINNAME_check)
MAINNAME <- substr(MAINNAME,1,nchar(MAINNAME)-2) #cut off .R
}
######################+
#release unused memory
gc()
################################################################################################################+
# MAIN PART ####
df<-LOAD(dfinput=paste0(DFMAIN,"_ex5"),pattdir=A)
# run regression equation
reg1<- lm(lnwage ~ edu, data = df)
reg2<- lm(lnwage ~ edu+edu2, data = df)
summary (reg1)
su8mmary(reg2)
# TARGET:
# INDATA:
# OUTDATA/ OUTPUT:
################################################################################################################+
# INTRO	script-specific ####
#clear gobal environment of all but uppercase objects (globals, myfunctions, scalars)
CLEARCOND()
#adapt scriptname/ rfilename and extension if NOT executed in batch mode
MAINNAME_check <- rstudioapi::getActiveDocumentContext()$path #returns path+name of script currently executed (no outsourcing to program possible)
if ( !grepl("00_execute",MAINNAME_check)) {
MAINNAME <- sub(".*/|^[^/]*$", "", MAINNAME_check)
MAINNAME <- substr(MAINNAME,1,nchar(MAINNAME)-2) #cut off .R
}
######################+
#release unused memory
gc()
################################################################################################################+
# MAIN PART ####
df<-LOAD(dfinput=paste0(DFMAIN,"_ex5"),pattdir=A)
# run regression equation
reg1<- lm(lnwage ~ edu, data = df)
reg2<- lm(lnwage ~ edu+edu2, data = df)
summary (reg1)
summary(reg2)
#export
stargazer(reg1,reg2,type="latex")
stargazer(reg1,reg2,type="text")
